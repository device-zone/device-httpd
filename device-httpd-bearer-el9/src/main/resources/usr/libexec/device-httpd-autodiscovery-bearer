#!/bin/bash
  
if [ $# -eq 2 ]; then

  instance="${1}"
  line="${2}"

  cat > "device-${instance}-bearer.conf" <<- EOF
# Generated by $0 on `date`
# DO NOT MODIFY THIS FILE - it will be overwritten on server restart.
#

<IfModule !auth_bearer_module>
  LoadModule auth_bearer_module modules/mod_auth_bearer.so
</IfModule>
<IfModule !autht_core_module>
  LoadModule autht_core_module modules/mod_autht_core.so
</IfModule>
<IfModule !autht_jwt_module>
  LoadModule autht_jwt_module modules/mod_autht_jwt.so
</IfModule>

AuthtJwtDriver openssl

EOF

  install -m 640 "device-${instance}-bearer.conf" "/etc/httpd/conf.device.d/instance/${instance}"/bearer.conf

fi

